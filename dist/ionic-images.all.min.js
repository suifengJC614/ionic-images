!function(){var i=angular.module("ion-images",["ionic"]);i.constant("imgUtils",{isType:function(i,n){return"Null"===n&&null===i||"Undefined"===n&&void 0===i||"Number"===n&&isFinite(i)||Object.prototype.toString.call(i).slice(8,-1)===n}}),Array.prototype.insertAt=function(i,n){this.splice(i,0,n)}}();
!function(e){function t(t){function a(e,t,a,c){e.images=[]}function c(e,a,c,i,n){t.createModal({images:e.images,scope:e}).then(function(t){e.modal=t,e.$watchCollection("images",function(){t.setImage(e.images)})})}function i(t){t.childs=[],this.compileChildImage=function(a,c,i){var n=t.col;n>5&&(n=5),n=parseInt(n);var o="";n>1&&(o="col-"+parseInt(100/n)),e(c).wrap("<li class='col "+o+"'></li>"),a.bgSrc&&t.images.push(a.bgSrc),t.childs.push({scope:a,element:c,attrs:i}),e(c).attr("data-index",t.childs.length-1)},this.clickImageWrap=function(a){var c=e(a).attr("data-index"),i={offset:e(a).offset()};t.modal.show(c,i)}}return{restrict:"E",replace:!0,transclude:!0,scope:{col:"@"},template:'<ul class="row img-group" ng-transclude></ul>',controller:["$scope",i],compile:function(e,t,i){return{pre:a,post:c}}}}var a=angular.module("ion-images");a.directive("imgGroup",t),t.$inject=["imageModal"]}(jQuery);
!function(e){function o(){function o(o,t,a,c,s){function n(n){n=e.extend({},i,n);var r=o.defer(),m=n.scope?n.scope.$new():a.$new(!0);return m.data={},m.opts={touchMoveStopPropagation:!1},c.isType(n.images,"Array")?m.images=n.images:m.images=[],t.fromTemplateUrl("src/js/imageModal/image-modal.html",{scope:m,animation:"slide-fade"}).then(function(e){r.resolve(new l(m,e,s))}),r.promise}return{createModal:n}}var i={images:[]};this.$get=o,o.$inject=["$q","$ionicModal","$rootScope","imgUtils","$ionicScrollDelegate"]}function i(o){var i=this;i.src=o,i.zoom=1,e("<img/>").attr("src",o).load(function(){i.width=this.width,i.height=this.height})}function l(e,o,i){var l=this;l.modal=o,e.$watch("data.slider",function(){l.slider=e.data.slider,l.slider&&l.slider.params&&(l.slider.params.onSlideChangeEnd=e.slideChange)}),l.scope=e,l.clickCount=0,l.$ionicScrollDelegate=i,e.clickTap=function(e){l.clickCount++,1==l.clickCount&&setTimeout(function(){1==l.clickCount?l.hide():l.scale(e),l.clickCount=0},300)},e.wrapScroll=function(e){var o=l.scope.images[e],i=l.$ionicScrollDelegate.$getByHandle("scroll"+e),t=i.getScrollView();if(o.zoom=t.__zoomLevel,1!=o.zoom&&l.slider.activeIndex==e){var a={scrollLeft:t.__scrollLeft,scrollTop:t.__scrollTop,maxScrollLeft:t.__maxScrollLeft,maxScrollTop:t.__maxScrollTop};a.scrollLeft>a.maxScrollLeft?l.allowSwipe(!0):a.scrollLeft<0?l.allowSwipe(!0):l.allowSwipe(!1)}},e.slideChange=function(){var e=l.slider.activeIndex,o=l.scope.images[e];l.allowSwipe(1==o.zoom)}}var t=angular.module("ion-images");t.provider("imageModal",o),l.prototype={setImage:function(e){if(e){var o=[];angular.forEach(e,function(e){o.push(new i(e))}),this.scope.images=o}},reset:function(){var e=this;this.scope.images.forEach(function(o,i){o.zoom=2,e.scale(i)})},show:function(e,o){this.slider.activeIndex=e,this.modal.show()},hide:function(){this.modal.hide(),this.reset()},scale:function(e){var o=this.scope.images[e];o.zoom=1==o.zoom?2:1;var i=this.$ionicScrollDelegate.$getByHandle("scroll"+e);i.zoomTo(o.zoom,!0),this.allowSwipe(1==o.zoom)},allowSwipe:function(e,o){o&&"next"!=o.toLowerCase()||(e?this.slider.unlockSwipeToNext():this.slider.lockSwipeToNext()),o&&"prev"!=o.toLowerCase()||(e?this.slider.unlockSwipeToPrev():this.slider.lockSwipeToPrev())}}}(jQuery);
!function(c){function i(){function i(i,r,a,e){var n=c(r).find("div");e&&e.compileChildImage(i,r,a);var d=function(){i.bgSrc?n.css("background-image","url('"+i.bgSrc+"')"):n.css("background-image","")};i.clickWrap=function(){e&&e.clickImageWrap(r),"function"==typeof i.onClickWrap&&i.onClickWrap()},i.$watch(i.bgSrc,d)}return{restrict:"E",replace:!0,require:"^?imgGroup",scope:{delegateHandle:"@",bgSrc:"=",defAddClass:"@",onClickWrap:"&"},template:'<div class="col-img-wrap"><div></div><em></em></div>',compile:function(r,a){return c(r).find("div").attr({"ng-class":"{'"+(a.defAddClass?a.defAddClass:"def-add")+"': !bgSrc && onClickWrap}","ng-click":"clickWrap()"}),i}}}var r=angular.module("ion-images");r.directive("imgWrap",i)}(jQuery);
!function(i){try{i=angular.module("ion-images")}catch(e){i=angular.module("ion-images",[])}i.run(["$templateCache",function(i){i.put("src/js/imageModal/image-modal.html",'<div class="modal image-model dark-bg"><ion-slides options=opts slider=data.slider><ion-slide-page ng-repeat="img in images track by $index" on-tap=clickTap($index)><ion-scroll delegate-handle=scroll{{$index}} direction=xy scrollbar-y=false zooming=true min-zoom=1 on-scroll=wrapScroll($index)><div class=img-wrap><img ng-src={{img.src}}><em></em></div></ion-scroll></ion-slide-page></ion-slides></div>')}])}();